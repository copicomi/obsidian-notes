#计算机网络 
#reading
 [[计算机网络自顶向下]]
 
 # Chapter 1
 ##### 1.1 什么是因特网
 - [[因特网]]的描述角度
	 - 因特网是网络之间互联的网络
	 - 一个角度：软硬件组成
		 - 端系统/[[主机]]（host）
		 - 通过[[通信链路]]进行实际信息传输
		 - 端到端接口为[[分组交换机]]
			 - [[局域网]]
		 - 端到因特网服务提供商[[ISP]]
			 - [[因特网]]
		 - 面向硬件
	 - 另一个角度： 面向应用服务的基础设施
		 - [[套接字接口]](Socket)
			 - 端系统向应用程序提供的接口
				 - 提供服务
				 - 对底层的网络完成了**抽象**
 - 什么是[[协议]]（protocol）
	 - 不同实体间的通信规则
	 - 为通信双方确定统一的信息规则
	 - 使得不同的硬件生产商的产品间，
		 - 可以通过**同一套**协议进行信息传输
	 - 对传输规则的**抽象**
 ##### 1.2 [[网络边缘]](Network edge)
 - 与[[网络核心]]相区别
 - 边缘，即因特网的边缘
	 - [[端系统]]
		 - [[主机]]
			 - [[客户]]（client）
			 - [[服务器]]（server）
		 - 移动设备
 - 接入网：将端系统**物理**连接到其[[边缘路由器]]的网络
	 - 家庭接入
		 - [[DSL]]：数字用户线
			 - 使用[[调制解调器]]转换信号
				 - 信息转音频
				 - 音频转信息
			 - 使用原有的**电话线路**
				 - 不同的频率编码，分离出三种信道
					 - 高速下行信道
					 - 中速上行信道
					 - 普通的双向电话信道
				 - 实现线路复用
			 - 用户和服务商 用[[分频器]]对数字信号和电话信号进行分离
			 - 利用原有的**本地电话**基础设施
		 - 电缆
			 - 利用原有的**有线电视**基础设施
			 - 使用电缆调制解调器，与DSL类似
			 - 共享线路
				 - 可能有用户侵占大量资源
				 - 需要避免[[碰撞]]问题
			 - 通过[[以太网]]连接到家庭PC（[[IDK]])
		 - [[FFTH]]：光纤到户
			 - 光纤分布
				 - 直接连到服务商
				 - 多个用户共享线路，再连到服务商
			 - 两种分布体系结构
				 - 有源光纤网络（AON）
				 - 无源光纤网络（PON）
			 - 速度快，竞争力高
		 - 5G固定式无线
	 - 企业（和家庭）接入
		 - [[以太网]]
			 - 使用**双绞铜线**与以太网交换机相连
			 - 以太网可以连入一台本地的**服务器**
				 - 这样用户就可以在不访问因特网的情况下，与同一个以太网内的服务器进行通信
				 - 实现[[局域网]](LAN)
				 - 搭建了属于企业或家庭内部私有的数据存储中心、内部网络
				 - 实现内部资源的高速访问
			 - 以太网交换机再连入统一的**机构路由器**，随后连接到机构的ISP，接入因特网
		 - 也可使用无线接入（[[WiFi]]）
			 - 再与有线以太网连接
			 - 通过 WiFi 与有线网络的结合，实现漫游上网
	 - 广域无线接入
		 - 3G、LTE4G 和 5G
		 - 长距离传输（数万米！）
 - 物理媒介
	 - 双绞铜线
	 - 同轴电缆
	 - 光纤
	 - 陆地无线电信道
		 - 短距离：蓝牙
		 - 局域：无线LAN
		 - 长距离：蜂窝接入
	 - 卫星无线电信道


##### 1.3 网络核心 ：交换机与链路的网状网络
- [[分组交换]]
	- [[报文]]（message）：端系统彼此交换的信息
		- 长报文分解为数据包，称为[[分组]](packet)
		- 通过数据链路和**分组交换机**传输
			- 交换机有[[路由器]]和[[链路层交换机]]
		- 分组以**最大**传输速率通过链路
	- [[存储转发传输]]
		- 接收整个数据包后，才进行传输
		- 先缓存，再转发
		- 等待全部数据到达，而不进行转发的这段时间，造成数据的[[延时]]
		- $d_{end-end} = N \frac{L}{R}$
	- 排队时延和分组丢失
		- 若分组到达时，交换机正在传输另一个分组，那么到达分组必须等待传输完毕，造成[[排队时延]]，取决于网络拥塞等级
		- 若交换机的缓存空间已满，为接收新的分组，必须丢弃一个排队中或者到达的分组，这时产生[[分组丢失]]（丢包）（packet loss）
	- [[转发表]]和[[路由选择协议]]
		- 分组给出目标的 IP 地址
		- 路由器检查 IP，在[[转发表]]中寻找路径
		- 将分组转发到出链路
		- 路由表只提供“下一步该往哪个方向走”
	- 特点：
		- 报文分组
		- 共享资源（竞争资源）
- [[电路交换]]
	- 为传输预留资源，建立一条端对端的专用信道
	- 在传送信息前，必须进行**连接**，之后网络才会预留出[[带宽]]
	- 此时传输速率是**恒定的**，**确保的**
	- 电路交换网络中的复用
		- 频分复用（[[FDM]]）
			- 为传输分配一个专用频段，其宽度称为**带宽**
			- 信息在空间上**并行**传输
		- 时分复用([[TDM]])
			- 把时间划分为帧
			- 信息在时间上**交替**传输
- 分组交换和电路交换的对比
	- 分组：资源共享，速度不稳定，更简单
	- 电路：资源预留，速度恒定，端到端连接复杂
	- 情景
		- 大量用户请求
		- 单个用户发出大量请求，其余用户占用线路但保持静默
	- **分组交换更优**
		- 根本在于电路交换的资源预留
			- 缺乏灵活性
			- 在静默期，无法有效运用空闲资源
		- 而分组交换按需分配资源
- 网络的网络
	- 网络结构 1 ：
		- 两层，唯一全球 ISP 和底层 ISP
	- 网络结构 2 ：
		- 两层，多个全球 ISP
		- 全球 ISP 之间存在竞争，因此产生不同[[提供商]]
	- 网络结构 3 ：
		- 多层，全球、区域、底层
		- 实际中不可能存在一个 ISP 覆盖所有的底层 ISP 连接，因此产生区域 ISP 进行分层
		- 区域 ISP 按覆盖区域等级，又分为不同层次
	- 网络结构 4 ：
		- 接入 ISP、区域 ISP、第一层 ISP、PoP、多宿、对等、IXP
		- 提出与现代因特网更接近的概念
		- [[存在点]]（[[PoP]]）：
			- 提供商网络中的**路由器群组**
			- 可从第三方租用高速链路，与PoP连接
			- [[IDK]]
		- [[多宿]]： 
			- 一个接入ISP，可以同时与多个上层 ISP 连接
			- 即使有一个提供商 ISP 损坏，也不影响传输，有备用 ISP
		- [[对等]]（peer）：
			- 相同层次的区域 ISP 间建立直接连接
			- 不经过上层 ISP 进行传输，提高效率
			- 对等 ISP 之间一般不支付费用，节约成本
		- [[因特网交换点]]（IXP）：
			- 汇合点，为不同 ISP 提供对等的**中转站**
	- 网络结构 5 ：
		- 描述现代因特网
		- 在 4 的顶层添加[[内容提供商网络]]
		- 谷歌网络
			- 19 个数据中心，使用专用网络传输
			- 与下层 ISP 对等，无结算
			- 绕过上层 ISP 进行传输
		- 减少向上层 ISP 的支付费用
		- 增强对内容服务传输的控制
##### 1.4 分组交换网中的时延、丢包和吞吐量
 1. 分组交换网中的时延（delay）
	 - 时延的类型
		 - [[处理时延]]
			 - 检查分组首部的时间
			 - 决定将该分组导向何处的时间
			 - 微秒级
		 - [[排队时延]]
			 - 等待进入缓存的时间
			 - 毫秒到微秒级
		 - [[传输时延]]
			 - 将分组从路由器缓存推向链路的时间
			 - $d = \frac{L}{R}$
			 - 毫秒到微秒级
		 - [[传播时延]]
			 - 经过链路传向下一个路由器的时间
			 - 取决于物理媒介
			 - 速度：$2 \times 10^8 \sim 3 \times 10^8$，大约为光速
			 - 广域网中，毫秒级
		 - 传输时延和传播时延的比较
			 - 前者是分组长度和链路传输速率的函数
				 - $L$ 表示总比特，$R$ 表示传输速率
				 - $d_{trans} = \frac{L}{R}$
			 - 后者是传播距离的函数
				 - $d_{prop} = \frac{s}{v}$
		 - 总时延由下式给定
			 - $d_{nodal} = d_{proc} + d_{queue} + d_{trans} + d_{prop}$
		 - 不同的应用情景下，各个部分时延的影响比例也不同，需要具体分析
			 - 卫星互联
			 - 大学局域网
			 - 低速拨号调制解调器
 2. 排队时延和丢包
	 - [[排队时延]]
		 - 不同分组的排队时延不同，因此采用统计量描述排队时延
		 - 流量强度
			 - $a$ 表示分组到达队列的平均速率（分组/秒）
			 - $流量强度 = \frac{La}{R}$
			 - *设计系统时流量强度不能大于 1*
		 - 到达流量的性质
			 - 当分组平均到达时，排队时延最小
			 - 当分组集中（突发式）到达时，排队时间最大
			 - 实际情况中一般是随机的
	 - [[丢包]]
		 - 缓存已满，丢弃多余分组
		 - 流量强度越大，丢包越多
	 - 一个节点的性能由 **时延** 和 **丢包概率** 共同度量
 3. 端到端时延
	 - 可用软件 *Tracetoute* 测量
 4. 计算机网络中的吞吐量
	 - 接收文件的速率
		 - 某些软件不只关心时延，同时关心同一时间的瞬时吞吐量
		 - 如电话和视频软件，需要一定阈值以上的数据以正常工作
	 - 吞吐量的影响因素
		 - 瓶颈链路：传播过程中最慢的链路
		 - 干扰流量：并行通过链路的用户数量，会抢占传播速度
##### 1.5 协议层次及其服务
1. 分层的体系结构
	- 为上层提供服务，调用下层接口
	- 每层专注于自己做的事情
	- 概念化、结构化
	- 网络协议层中，有的由软件实现，有的由硬件接口实现
	- 各层的协议被称为**协议栈**
	- 互联网协议栈
		- 应用层
		- 运输层
		- 网络层
		- 链路层
		- 物理层
2. 封装
	- 上层向下层传递信息时，不仅要传输原信息，而且要附加关于本层面的信息，再封装成新信息
	- 在每一层，一个分组由两部分字段构成：**首部字段**和**有效载荷字段**
##### 1.6 面对攻击的网络
1. 有害程序
2. 攻击服务器和网络基础设施
3. 嗅探分组
4. 伪装其他用户

	