# 5.6 Struct

今天我想讨论的最后一个话题是 struct，stuct 非常重要并且在课程的实验中会经常出现。我会稍微介绍一下 struct 在内存中的结构是怎样。基本上来说，struct 在内存中是一段连续的地址，如果我们有一个 struct，并且有 f1，f2，f3 三个字段。

![](<../assets/image (761).png>)

当我们创建这样一个 struct 时，内存中相应的字段会彼此相邻。你可以认为 struct 像是一个数组，但是里面的不同字段的类型可以不一样。（注，这应该是这一节中最有用的一句话了。。。）

我们可以将 struct 作为参数传递给函数。

![](<../assets/image (723).png>)

这里有一个名字是 Person 的 struct，它有两个字段。我将这个 struct 作为参数传递给 printPerson 并打印相关的信息。我们在 printPerson 中设置一个断点，当程序运行到函数内部时打印当前的 Stack Frame。

![](<../assets/image (673).png>)

我们可以看到当前函数有一个参数 p。打印 p 可以看到这是 struct Person 的指针，打印 p 的反引用可以看到 struct 的具体内容。

![](<../assets/image (651).png>)

> 学生提问：是谁创建了编译器来将 C 代码转换成各种各样的汇编代码，是不同的指令集创建者，还是第三方？
>
> TA：我认为不是指令集的创建者，通常是第三方创建的。你们常见的两大编译器，一个是 gcc，这是由 GNU 基金会维护的；一个是 llvm，这个是开源的，你可以查到相应的代码。当一个新的指令集，例如 RISC-V，发布之后，我认为会指令集的创建者和编译器的设计者之间会有一些高度合作。简单来说我认为是第三方配合指令集的创建者完成的编译器。RISC-V 或许是个例外，因为它是来自于一个研究项目，相应的团队或许自己写了编译器，但是我不认为 Intel 对于 gcc 或者 llvm 有任何输入。
