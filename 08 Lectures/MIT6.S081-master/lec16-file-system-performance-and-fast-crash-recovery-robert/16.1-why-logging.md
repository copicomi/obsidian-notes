# 16.1 Why logging

今天这节课也是讲解文件系统的 logging，这节课讲的是 Linux 中的广泛使用的 ext3 文件系统所使用的 logging 系统，同时我们也会讨论在高性能文件系统中添加 log 需要面对的一些问题。首先我会花几分钟来回顾一下，为什么我们要学习 logging。

- 之所以我们认为 logging 很重要，是因为这是一个巨大的成功和重要的思想，几乎可以认为 logging 是一种魔法，它可以用在任何一个已知的存储系统的故障恢复流程中，它在很多地方都与你想存储的任何数据相关。所以你们可以在大量的存储场景中看到 log，比如说数据库，文件系统，甚至一些需要在 crash 之后恢复的定制化的系统中。
- 你们也可以发现 log 作为从故障中恢复的机制，在分布式系统中也有大量的应用。因为 log 是一种可以用来表示所有在 crash 之前发生事情的数据结构，如果能够理解 log，那么就可以更容易的从 crash 中恢复过来。
- 除此之外，当你尝试构建高性能 logging 系统时，log 本身也有大量有意思的地方。

![](<../assets/image (589).png>)

这里有一个术语，当我们谈到 log 时，与今天阅读的[论文](https://pdos.csail.mit.edu/6.828/2020/readings/journal-design.pdf)所用到的 journal 是同一件事情，它们是同义词。除此之外，今天的论文是有关向 ext2 增加 journal，并得到 ext3 文件系统（注，所以可以认为 ext3 文件系统就是 ext2 加上了 logging 系统）。

接下来我将从这几个方面来讨论 ext3 文件系统：某种程度上将其与 XV6 进行对比；解释 ext3 是如何修复 XV6 的 logging 存在的性能问题；解释 ext3 在故障恢复时语义上的一些变化。
